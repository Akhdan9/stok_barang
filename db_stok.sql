-- phpMyAdmin SQL Dump
-- version 5.2.0
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Generation Time: Jun 07, 2022 at 10:31 PM
-- Server version: 10.4.24-MariaDB
-- PHP Version: 8.0.19

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `db_stok`
--

-- --------------------------------------------------------

--
-- Table structure for table `ci_sessions`
--

CREATE TABLE `ci_sessions` (
  `id` varchar(128) NOT NULL,
  `ip_address` varchar(45) NOT NULL,
  `timestamp` int(10) UNSIGNED NOT NULL DEFAULT 0,
  `data` blob NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `ci_sessions`
--

INSERT INTO `ci_sessions` (`id`, `ip_address`, `timestamp`, `data`) VALUES
('mnivsele5fmfh4c36hi60j5eb2a0pfh3', '::1', 1654547260, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343534373236303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('l7000cjdmc4dr5iad04c1lg28q83l3li', '::1', 1654547754, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343534373735343b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('6auiljkfk8hfdgo09vsnjfl46i7fl1n7', '::1', 1654548960, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343534383936303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('dtj8raomaefu5lm0s8aqhr22rv16odes', '::1', 1654549467, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343534393436373b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('nld837jsqc7fq2ghcv7mat0i906vopdt', '::1', 1654551872, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535313837323b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33323a224461746120426172616e6720626572686173696c20646974616d6261682e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('rbmbullpm2ekg9btj8cfe0qk175fa9qs', '::1', 1654552416, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535323431363b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33323a224461746120426172616e6720626572686173696c20646974616d6261682e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('tbbmt4vg626j1gt65kc5c6tjcr5isgr2', '::1', 1654552990, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535323939303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('kg9d97i6hiced3a79kq2ok95q6lgupqn', '::1', 1654553652, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535333635323b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33323a224461746120426172616e6720626572686173696c20646974616d6261682e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('7m99q6490althp0si1jak6r8imc2n6os', '::1', 1654553981, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535333938313b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33323a224461746120426172616e6720626572686173696c20646974616d6261682e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('p5lvev4t409l26fmmnahhb4i22r91qt8', '::1', 1654554471, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535343437313b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a2244617461207065676177616920626572686173696c20646970657262617275692e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('m15lreovainr39oc6nsbpb8eo9a69cic', '::1', 1654555164, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535353136343b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('a3mpnb17nh5uoahgpp6i02gkrjjc77p0', '::1', 1654555497, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535353439373b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('j0c4nd0ddv8bu1rg7j0r0812t3imbj0e', '::1', 1654556385, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535363338353b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('lojq3t2h09j3j2cs52ej7b9he6f4ha9t', '::1', 1654556803, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535363830333b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('fuvpies8n8b2mh4fej7toucf1jmakf8r', '::1', 1654557138, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535373133383b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('obpsa5ftkqassk71ja96ub710g6h7hgt', '::1', 1654557478, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535373437383b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('1bjnnc3395ei1mqgdrrhn0sdpgap4e45', '::1', 1654558199, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535383139393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('b7t2fjp5qfc18938gjuekh8cdmosas4u', '::1', 1654558549, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535383534393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('c82l01tqvvdl9klvgfhv358ekhn7pcss', '::1', 1654558552, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343535383534393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('gk0t377l1ffpbki3b7ts4dbmtefsk4ph', '::1', 1654623271, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632333237313b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('4sppokkoif18rh60cib99s9kn3r5prmu', '::1', 1654623598, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632333539383b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('emr3lp0f6tslk403nttot1lkqj0q15j1', '::1', 1654624919, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632343931393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('gd8m79lj7qgr6eabu1ljnd69el1enoqd', '::1', 1654625454, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632353435343b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('n86fluttindvhmg6qn1d4tvaa4h4ai3d', '::1', 1654625944, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632353934343b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('9rcma5kk8jsr1kcrp6qa86eciatb9tc3', '::1', 1654626317, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632363331373b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('hiuiilbsksoahum2irv1ettr4bg49drr', '::1', 1654626670, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632363637303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('gaiteikged7a05g3c1id1lfdh1msgop3', '::1', 1654626979, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632363937393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('brc7o7q8k5f7vlkgrq60t9v3shj4573t', '::1', 1654627336, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632373333363b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('suibfvj7mrclrmfoqu9hq5ba33agesn7', '::1', 1654627802, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343632373830323b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('uk9gvupojfvbvrqc1j554pmh1rfhaft2', '::1', 1654631952, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343633313935323b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('gq86qt9nnl5jd989p6pbcsnkg7ll903j', '::1', 1654632283, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343633323238333b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('6sg4i9cg24ec10e63r3pjm1comh7f58n', '::1', 1654632592, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343633323539323b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('fq549s0vr8r62uv4gc5j4p7mjmtv7ga4', '::1', 1654633079, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343633333037393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d),
('ft2n421geace6u3cm9ge7lfbjuhetdv4', '::1', 1654633131, 0x5f5f63695f6c6173745f726567656e65726174657c693a313635343633333037393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b737563636573737c733a33343a224461746120426172616e6720626572686173696c20646970657262617275692e2e2e223b5f5f63695f766172737c613a313a7b733a373a2273756363657373223b733a333a226f6c64223b7d);

-- --------------------------------------------------------

--
-- Table structure for table `tbl_barang`
--

CREATE TABLE `tbl_barang` (
  `kode_barang` int(20) NOT NULL,
  `nama_barang` varchar(255) NOT NULL,
  `brand` varchar(255) NOT NULL,
  `item_no` varchar(255) NOT NULL,
  `size` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_barang`
--

INSERT INTO `tbl_barang` (`kode_barang`, `nama_barang`, `brand`, `item_no`, `size`) VALUES
(8293823, 'tes', 'tes', '', '0'),
(8293824, 'testitikdua\r\n', 'tes', '', '0'),
(8293825, 'abcde', 'abcdeeee', '', '0'),
(8293826, 'Anterior Cervical Screw-II 4x11', 'ideal meditech', '', '0'),
(8293832, 'pepepe', 'asdasda', '', '0'),
(8293833, 'halo', 'oke', '', '0'),
(8293834, 'okokoko11', 'okokokok', 'ottitit-2', 'f321wd'),
(8293835, 'halo', 'haiq', '123hai', '42');

-- --------------------------------------------------------

--
-- Table structure for table `tbl_detail_pembelian`
--

CREATE TABLE `tbl_detail_pembelian` (
  `id_pembelian` varchar(20) NOT NULL,
  `id_barang` int(20) NOT NULL,
  `qty` smallint(6) NOT NULL,
  `harga` double NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_detail_pembelian`
--

INSERT INTO `tbl_detail_pembelian` (`id_pembelian`, `id_barang`, `qty`, `harga`) VALUES
('ID1652927987', 111, 6, 200000),
('ID1652930797', 12345, 100, 1000),
('ID1652930849', 829382, 10, 5000),
('ID1653635858', 0, 5, 10000);

--
-- Triggers `tbl_detail_pembelian`
--
DELIMITER $$
CREATE TRIGGER `pembelian_barang` AFTER INSERT ON `tbl_detail_pembelian` FOR EACH ROW BEGIN
	UPDATE tbl_barang b SET b.stok = b.stok + new.qty
    WHERE b.kode_barang = new.id_barang;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `update_pembelian` AFTER DELETE ON `tbl_detail_pembelian` FOR EACH ROW BEGIN
	UPDATE tbl_barang b SET b.stok = b.stok - old.qty
    WHERE b.kode_barang = old.id_barang;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `tbl_detail_penjualan`
--

CREATE TABLE `tbl_detail_penjualan` (
  `id_penjualan` varchar(20) NOT NULL,
  `id_barang` varchar(6) NOT NULL,
  `qty` smallint(6) NOT NULL,
  `harga` double NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_detail_penjualan`
--

INSERT INTO `tbl_detail_penjualan` (`id_penjualan`, `id_barang`, `qty`, `harga`) VALUES
('ID1595990535', 'CTR811', 2, 260000),
('ID1648180020', 'ADVSPK', 2, 50000),
('ID1653369811', '12345', 1, 100000),
('ID1653635884', 'abcde', 2, 10000);

--
-- Triggers `tbl_detail_penjualan`
--
DELIMITER $$
CREATE TRIGGER `penjualan_barang` AFTER INSERT ON `tbl_detail_penjualan` FOR EACH ROW BEGIN
	UPDATE tbl_barang b SET b.stok = b.stok - new.qty
    WHERE b.kode_barang = new.id_barang;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `update_penjualan` AFTER DELETE ON `tbl_detail_penjualan` FOR EACH ROW BEGIN
	UPDATE tbl_barang b SET b.stok = b.stok + old.qty
    WHERE b.kode_barang = old.id_barang;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `tbl_lokasi`
--

CREATE TABLE `tbl_lokasi` (
  `id_cabang` int(11) NOT NULL,
  `nama_cabang` varchar(255) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `tbl_lokasi`
--

INSERT INTO `tbl_lokasi` (`id_cabang`, `nama_cabang`) VALUES
(1, 'papua'),
(2, 'jateng'),
(3, 'jatim');

-- --------------------------------------------------------

--
-- Table structure for table `tbl_pembelian`
--

CREATE TABLE `tbl_pembelian` (
  `id_pembelian` varchar(20) NOT NULL,
  `tgl_pembelian` date NOT NULL,
  `id_supplier` varchar(15) NOT NULL,
  `id_user` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_pembelian`
--

INSERT INTO `tbl_pembelian` (`id_pembelian`, `tgl_pembelian`, `id_supplier`, `id_user`) VALUES
('ID1652930797', '2022-05-19', 'ID1595997179', 1),
('ID1652930849', '2022-05-19', 'ID1595997179', 1),
('ID1653635858', '2022-05-27', 'ID1595997179', 1);

-- --------------------------------------------------------

--
-- Table structure for table `tbl_penjualan`
--

CREATE TABLE `tbl_penjualan` (
  `id_penjualan` varchar(20) NOT NULL,
  `nama_pembeli` varchar(30) NOT NULL,
  `tgl_penjualan` date NOT NULL,
  `id_user` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_penjualan`
--

INSERT INTO `tbl_penjualan` (`id_penjualan`, `nama_pembeli`, `tgl_penjualan`, `id_user`) VALUES
('ID1653369811', 'okee', '2022-05-24', 2),
('ID1653635884', 'okee', '2022-05-27', 1);

-- --------------------------------------------------------

--
-- Table structure for table `tbl_supplier`
--

CREATE TABLE `tbl_supplier` (
  `id_supplier` varchar(15) NOT NULL,
  `nama_supplier` varchar(255) NOT NULL,
  `alamat` varchar(255) NOT NULL,
  `telp` varchar(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_supplier`
--

INSERT INTO `tbl_supplier` (`id_supplier`, `nama_supplier`, `alamat`, `telp`) VALUES
('ID1595997179', 'Aipel Computer', 'Ds. Manyar, Sidoarjo', '085731109556'),
('ID1595998788', 'Sarana Informasi Computer', 'Jl. Imam Bonjol No. 16 Nganjuk', '08392193833'),
('ID1650248939', 'tes', 'jl.asdasdjkasdjkdj', '081237812');

-- --------------------------------------------------------

--
-- Table structure for table `tbl_user`
--

CREATE TABLE `tbl_user` (
  `id_user` int(11) NOT NULL,
  `username` varchar(30) NOT NULL,
  `fullname` varchar(50) NOT NULL,
  `password` varchar(255) NOT NULL,
  `alamat` varchar(255) NOT NULL,
  `hp` varchar(20) NOT NULL,
  `foto` varchar(50) NOT NULL DEFAULT 'default.jpg',
  `level` enum('admin','pegawai') NOT NULL,
  `active` enum('Y','N') NOT NULL DEFAULT 'Y',
  `last_login` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_user`
--

INSERT INTO `tbl_user` (`id_user`, `username`, `fullname`, `password`, `alamat`, `hp`, `foto`, `level`, `active`, `last_login`) VALUES
(1, 'admin', 'Administrator', '$2y$08$BO41OJFfhPPPzjKdWw2I6OyUElK1mkD43UVt1ss6J1xrVUExC1lRy', '', '', 'foto1596017847.png', 'admin', 'Y', '2022-06-07 04:54:01'),
(2, 'pegawai', 'Pegawaiaaa', '$2y$10$Cr0N4aR9eNJEXUeYojjfEuw9Xc.dkEZ2KUssx4csABybnTbjp.Gom', 'Jl. Semeru No.90', '085731109355', 'foto1596071469.png', 'pegawai', 'Y', '2022-06-07 01:13:43'),
(6, 'user2', 'Pegawai Kedua', '$2y$10$swIMV3E0b6nRrDXnyBgjO.tN7vMLNmYf6Zm76CG.TO7WH9sZU5LTm', 'Jl. Nanas No. 24, Pace - Nganjuk', '085731109355', 'foto1595054714.png', 'pegawai', 'Y', '2020-07-22 07:59:43');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `ci_sessions`
--
ALTER TABLE `ci_sessions`
  ADD KEY `ci_sessions_timestamp` (`timestamp`);

--
-- Indexes for table `tbl_barang`
--
ALTER TABLE `tbl_barang`
  ADD PRIMARY KEY (`kode_barang`);

--
-- Indexes for table `tbl_lokasi`
--
ALTER TABLE `tbl_lokasi`
  ADD PRIMARY KEY (`id_cabang`);

--
-- Indexes for table `tbl_pembelian`
--
ALTER TABLE `tbl_pembelian`
  ADD PRIMARY KEY (`id_pembelian`);

--
-- Indexes for table `tbl_penjualan`
--
ALTER TABLE `tbl_penjualan`
  ADD PRIMARY KEY (`id_penjualan`);

--
-- Indexes for table `tbl_supplier`
--
ALTER TABLE `tbl_supplier`
  ADD PRIMARY KEY (`id_supplier`);

--
-- Indexes for table `tbl_user`
--
ALTER TABLE `tbl_user`
  ADD PRIMARY KEY (`id_user`),
  ADD UNIQUE KEY `username` (`username`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `tbl_barang`
--
ALTER TABLE `tbl_barang`
  MODIFY `kode_barang` int(20) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8293836;

--
-- AUTO_INCREMENT for table `tbl_lokasi`
--
ALTER TABLE `tbl_lokasi`
  MODIFY `id_cabang` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT for table `tbl_user`
--
ALTER TABLE `tbl_user`
  MODIFY `id_user` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
